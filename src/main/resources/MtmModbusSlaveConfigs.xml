<?xml version="1.0" encoding="UTF-8"?>
<Configuration>

    <ModbusDevices>

        <ModbusSlave>
            <HostAddress>127.0.0.1</HostAddress>
            <HostPort>7777</HostPort>
            <SlaveId>0</SlaveId>
            <UpstreamPattens>
                <!--  配置上报周期、上报topic、上报属性、数据来源  -->
                <UpstreamPatten>
                    <!--  默认为0  -->
<!--                    <Qos>0</Qos>-->
                    <CronExpr>this is CronExpr</CronExpr>
                    <IntervalInMilliseconds>111</IntervalInMilliseconds>
                    <Topics>
                        <Topic>i am topic 1.</Topic>
                        <Topic>i am topic 2.</Topic>
                    </Topics>
                    <Attributes>
                        <Attribute>
                            <!--  必须  -->
                            <AttrName>temperature</AttrName>
                            <!--  默认为0  -->
<!--                            <Address>0</Address>-->
                            <!--  默认为1  -->
<!--                            <Quantity>1</Quantity>-->
                        </Attribute>
                        <Attribute>
                            <!--  必须  -->
                            <AttrName>water level</AttrName>
                            <!--  默认为0  -->
                            <Address>1</Address>
                            <!--  默认为1  -->
                            <Quantity>2</Quantity>
                        </Attribute>

                    </Attributes>

                </UpstreamPatten>

                <UpstreamPatten>
                    <!--  默认为0  -->
                    <Qos>0</Qos>
                    <CronExpr>this is CronExpr2</CronExpr>
                    <IntervalInMilliseconds>222</IntervalInMilliseconds>
                    <Topics>
                        <Topic>i am topic 21.</Topic>
                        <Topic>i am topic 22.</Topic>
                    </Topics>
                    <Attributes>
                        <Attribute>
                            <!--  必须  -->
                            <AttrName>temperature</AttrName>
                            <!--  默认为0  -->
                            <Address>0</Address>
                            <!--  默认为1  -->
                            <Quantity>1</Quantity>
                        </Attribute>
                    </Attributes>

                </UpstreamPatten>

            </UpstreamPattens>

            <DownstreamTopics>
                <Topic>i am down topic 21.</Topic>
                <Topic>i am down topic 22.</Topic>
            </DownstreamTopics>

            <!--  可选项：没有则用Mtm中默认broker  -->
            <TargetMqttBroker>
                <BrokerAddress>iot-06z00d3qre8b6ub.mqtt.iothub.aliyuncs.com</BrokerAddress>
                <BrokerPort>1883</BrokerPort>
            </TargetMqttBroker>

            <!--  可选项：没有则用Mtm中默认client  -->
            <ProxyMqttClient>
                <ClientId></ClientId>
                <Username></Username>
                <Password></Password>
            </ProxyMqttClient>

        </ModbusSlave>

        <ModbusSlave>
            <HostAddress>127.0.0.1</HostAddress>
            <HostPort>7778</HostPort>
            <SlaveId>1</SlaveId>
            <UpstreamPattens>
                <UpstreamPatten>
                    <!--  默认为0  -->
                    <Qos>0</Qos>
                    <CronExpr>this is CronExpr</CronExpr>
                    <IntervalInMilliseconds>123</IntervalInMilliseconds>

                    <!--可以为空但必须有 之后会改-->
                    <Topics>
                        <Topic>i am topic 1.</Topic>
                        <Topic>i am topic 2.</Topic>
                    </Topics>

                    <Attributes>
                        <Attribute>
                            <!--  必须  -->
                            <AttrName>temperature</AttrName>
                            <!--  默认为0  -->
                            <Address>0</Address>
                            <!--  默认为1  -->
                            <Quantity>1</Quantity>
                        </Attribute>
                    </Attributes>
                </UpstreamPatten>
            </UpstreamPattens>

            <!--可以为空但必须有 之后会改-->
            <DownstreamTopics>
            </DownstreamTopics>

            <TargetMqttBroker>
                <BrokerAddress>ima defaultBrokerAddress</BrokerAddress>
                <BrokerPort>6788</BrokerPort>
            </TargetMqttBroker>

            <ProxyMqttClient>
                <ClientId>imadefaultclientid</ClientId>
                <Username>imadefaultUsername</Username>
                <Password>imadefaultPassword</Password>
            </ProxyMqttClient>

        </ModbusSlave>

    </ModbusDevices>

    <MqttDevices>
        waiting for finish.
    </MqttDevices>

</Configuration>